title: Home

resources:
  - url: /local/plugins/tracker-card.js?v=1.2.5
    type: js
  - url: 'https://unpkg.com/moment@2.22.2/moment.js'
    type: js
  - url: /local/plugins/card-modder.js?v=f3d96f
    type: js
  - url: /local/plugins/layout-card.js?v=e0ec2f
    type: js
  - url: /local/plugins/button-entity-row.js
    type: js
  - url: /local/plugins/mini-media-player-bundle.js?v=1.0.3
    type: module
  - url: /local/plugins/mini-graph-card-bundle.js?v=0.3.0
    type: module
  - url: /local/plugins/slider-entity-row.js?v1
    type: js
  - url: /local/plugins/button-card.js?v1
    type: module
  - url: /local/plugins/gap-card.js?v1
    type: js
  - url: /local/plugins/vertical-stack-in-card.js?v0.1.2
    type: js
  - url: /local/plugins/card-tools.js?v2
    type: js
  - url: /local/plugins/popup-card.js?v3
    type: js
  - url: /customcards/github/maykar/compact-custom-header.js?track=true
    type: module

views:

##########################################

  # PAGE - HOME

###########################################
  - title: Home
    path: home
    icon: mdi:home
    badges: []
    popup_cards: # POPUP CARDS
      media_player.living_room: # Living room media player popup
        title: Apple TV
        card:
          type: vertical-stack
          cards:
            - type: custom:mini-media-player
              entity: media_player.sonos
              more_info: false
              artwork: full-cover-fit
              idle_view:
                when_idle: true
              hide:
                power: true
                name: true
                icon: true
                artwork_border: true
            - type: picture-elements # Activity selection buttons
              image: /local/images/short-empty.png?v2.2
              elements:
                - type: image # WATCH TV BUTTON + STYLE ANCHOR USED FOR ALL BUTTONS
                  entity: switch.living_room_tv
                  tap_action:
                    action: toggle
                  image: /local/images/remote/tv.svg?v1
                  state_filter:
                    "on": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                  style:
                    top: 50%
                    left: 20%
                    # Reuse these values with <<: *style_anchor_remote in the style section for each button
                    <<: &style_anchor_remote
                      width: 2em # size of the icon
                      height: 2em # size of the icon
                      padding: 15px # how much padding around the icon (dictates the size of the circle/button)
                      background-color: var(--paper-item-icon-color)
                      border-radius: 50%
                      box-shadow: 0 3px 5px -1px rgba(0,0,0,.2), 0 6px 10px 0 rgba(0,0,0,.14), 0 1px 18px 0 rgba(0,0,0,.12)
                - type: image # WATCH APPLE TV BUTTON
                  entity: switch.apple_tv
                  tap_action:
                    action: toggle
                  image: /local/images/remote/apple.svg?v1
                  state_filter:
                    "on": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                  style:
                    <<: *style_anchor_remote
                    top: 50%
                    left: 50%
                - type: image # START PS4 BUTTON
                  entity: switch.ps4
                  tap_action:
                    action: toggle
                  image: /local/images/remote/playstation.svg?v1
                  state_filter:
                    "on": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                  style:
                    <<: *style_anchor_remote
                    top: 50%
                    left: 80%
            - type: picture-elements # Volume control
              image: /local/images/short-empty.png?v2.1
              elements:
                - type: image  # Volume up button
                  tap_action:
                    action: call-service
                    service: remote.send_command
                    service_data:
                      entity_id: remote.living_room_hub
                      device: 60032870
                      command: VolumeUp
                  image: /local/images/remote/volup.svg?v1
                  style:
                    <<: *style_anchor_remote
                    top: 50%
                    left: 80%
                - type: image  # Mute button
                  tap_action:
                    action: call-service
                    service: remote.send_command
                    service_data:
                      entity_id: remote.living_room_hub
                      device: 60032870
                      command: Mute
                  image: /local/images/remote/mute.svg?v1
                  style:
                    <<: *style_anchor_remote
                    top: 50%
                    left: 50%
                - type: image  # Volume down button
                  tap_action:
                    action: call-service
                    service: remote.send_command
                    service_data:
                      entity_id: remote.living_room_hub
                      device: 60032870
                      command: VolumeDown
                  image: /local/images/remote/voldown.svg?v1
                  style:
                    <<: *style_anchor_remote
                    top: 50%
                    left: 20%
            - type: conditional # CONDITIONAL TV remote - appears when the switch.watch_tv in "on"
              conditions:
                - entity: switch.watch_tv
                  state: "on"
              card:
                type: picture-elements
                image: /local/images/empty.png?v2.4
                elements:
                  - type: image  # Menu button
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60032916
                        command: Guide
                    image: /local/images/remote/menu.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 15%
                      left: 20%
                  - type: image  # Back button
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60032916
                        command: Exit
                    image: /local/images/image_elements/SVG/back.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 15%
                      left: 80%
                  - type: image  # Up arrow
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60032916
                        command: DirectionUp
                    image: /local/images/image_elements/SVG/arrow-up.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 15%
                      left: 50%
                  - type: image  # Left arrow
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60032916
                        command: DirectionLeft
                    image: /local/images/image_elements/SVG/arrow-left.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 40%
                      left: 25%
                  - type: image  # OK button
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 37579712
                        command: Select
                    image: /local/images/image_elements/SVG/play.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 40%
                      left: 50%
                  - type: image  # Right arrow
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60032916
                        command: DirectionRight
                    image: /local/images/image_elements/SVG/arrow-right.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 40%
                      left: 75%
                  - type: image  # Down arrow
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60032916
                        command: DirectionDown
                    image: /local/images/image_elements/SVG/arrow-down.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 65%
                      left: 50%
            - type: conditional # CONDITIONAL Apple TV remote
              conditions:
              - entity: switch.apple_tv
                state: "on"
              card:
                type: picture-elements
                image: /local/images/empty.png?v2.4
                elements:
                  - type: image  # Menu button
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60132409
                        command: Home
                    image: /local/images/image_elements/SVG/burger.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 15%
                      left: 20%
                  - type: image  # Back button
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60132409
                        command: Exit
                    image: /local/images/image_elements/SVG/back.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 15%
                      left: 80%
                  - type: image  # Up arrow
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60132409
                        command: DirectionUp
                    image: /local/images/image_elements/SVG/arrow-up.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 15%
                      left: 50%
                  - type: image  # Left arrow
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60132409
                        command: DirectionLeft
                    image: /local/images/image_elements/SVG/arrow-left.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 40%
                      left: 25%
                  - type: image  # OK button
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60132409
                        command: Select
                    image: /local/images/image_elements/SVG/play.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 40%
                      left: 50%
                  - type: image  # Right arrow
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60132409
                        command: DirectionRight
                    image: /local/images/image_elements/SVG/arrow-right.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 40%
                      left: 75%
                  - type: image  # Down arrow
                    tap_action:
                      action: call-service
                      service: remote.send_command
                      service_data:
                        entity_id: remote.living_room_hub
                        device: 60132409
                        command: DirectionDown
                    image: /local/images/image_elements/SVG/arrow-down.svg?v1
                    style:
                      <<: *style_anchor_remote
                      top: 65%
                      left: 50%
      light.living_room: # Living room lights popup
        title: Living Room Lights
        card:
          type: entities
          entities:
            - type: custom:slider-entity-row
              entity: light.living_room
              toggle: true
              name: Living room lights
      light.bedroom: # Bedroom lights popup
        title: Bedroom Lights
        card:
          type: entities
          entities:
            - type: custom:slider-entity-row
              entity: light.bedroom
              toggle: true
              name: Bedroom lights
      media_player.sonos: # Sonos media player popup
        title: Sonos
        card:
          type: entities
          entities:
            - type: custom:mini-media-player
              entity: media_player.sonos
              artwork: full-cover-fit
              icon: mdi:speaker
              hide:
                power: true
              shortcuts:
                columns: 3
                buttons:
                  - name: Indie
                    type: script
                    id: script.playlist_indie
      media_player.kitchen: # Kitchen echo media player popup
        title: Kitchen Music
        card:
          type: entities
          entities:
            - type: custom:mini-media-player
              entity: media_player.kitchen
              icon: mdi:speaker
              artwork: full-cover-fit
              shortcuts:
                columns: 3 # Max buttons per row
                buttons:
                  # Start predefined playlist
                  - name: Relaxing
                    type: playlist
                    id: spotify:user:......
                  - name: Classic
                    type: playlist
                    id: spotify:user:.......
                  - name: Indie
                    type: playlist
                    id: spotify:user:.......
      media_player.landing_dot: # Upstairs echo media player popup
        title: Upstairs Music
        card:
          type: entities
          entities:
            - type: custom:mini-media-player
              entity: media_player.landing_dot
              icon: mdi:speaker
              artwork: full-cover-fit
              shortcuts:
                columns: 3 # Max buttons per row
                buttons:
                  # Start predefined playlist
                  - name: Relaxing
                    type: playlist
                    id: spotify:user:.......
                  - name: Classic
                    type: playlist
                    id: spotify:user:.......
                  - name: Indie
                    type: playlist
                    id: spotify:user:.......
      alarm_control_panel.ha_alarm: # Alarm popup
        title: Alarm
        card:
          type: vertical-stack
          cards:
            - type: alarm-panel
              entity: alarm_control_panel.ha_alarm
            - type: entities
              entities:
                - entity: binary_sensor.front_door
                  name: Front door
                  icon: mdi:door
                - entity: binary_sensor.back_door
                  name: Back door
                  icon: mdi:door
      media_player.fire_tv: # Fire TV remote controls popup
        title: Fire TV Stick
        card:
          type: vertical-stack
          cards:
            - type: picture-elements
              image: /local/images/empty.png?v2.4
              elements:
                - type: image  # Home button
                  tap_action:
                    action: call-service
                    service: remote.send_command
                    service_data:
                      entity_id: remote.living_room_hub
                      device: 60553170
                      command: Home
                  image: /local/images/image_elements/SVG/burger.svg?v1
                  style:
                    <<: *style_anchor_remote
                    top: 15%
                    left: 20%
                - type: image  # Back button
                  tap_action:
                    action: call-service
                    service: remote.send_command
                    service_data:
                      entity_id: remote.living_room_hub
                      device: 60553170
                      command: Exit
                  image: /local/images/image_elements/SVG/back.svg?v1
                  style:
                    <<: *style_anchor_remote
                    top: 15%
                    left: 80%
                - type: image  # Up arrow
                  tap_action:
                    action: call-service
                    service: remote.send_command
                    service_data:
                      entity_id: remote.living_room_hub
                      device: 60553170
                      command: DirectionUp
                  image: /local/images/image_elements/SVG/arrow-up.svg?v1
                  style:
                    <<: *style_anchor_remote
                    top: 15%
                    left: 50%
                - type: image  # Left arrow
                  tap_action:
                    action: call-service
                    service: remote.send_command
                    service_data:
                      entity_id: remote.living_room_hub
                      device: 60553170
                      command: DirectionLeft
                  image: /local/images/image_elements/SVG/arrow-left.svg?v1
                  style:
                    <<: *style_anchor_remote
                    top: 40%
                    left: 25%
                - type: image  # OK button
                  tap_action:
                    action: call-service
                    service: remote.send_command
                    service_data:
                      entity_id: remote.living_room_hub
                      device: 60553170
                      command: OK
                  image: /local/images/image_elements/SVG/play.svg?v1
                  style:
                    <<: *style_anchor_remote
                    top: 40%
                    left: 50%
                - type: image  # Right arrow
                  tap_action:
                    action: call-service
                    service: remote.send_command
                    service_data:
                      entity_id: remote.living_room_hub
                      device: 60553170
                      command: DirectionRight
                  image: /local/images/image_elements/SVG/arrow-right.svg?v1
                  style:
                    <<: *style_anchor_remote
                    top: 40%
                    left: 75%
                - type: image  # Down arrow
                  tap_action:
                    action: call-service
                    service: remote.send_command
                    service_data:
                      entity_id: remote.living_room_hub
                      device: 60553170
                      command: DirectionDown
                  image: /local/images/image_elements/SVG/arrow-down.svg?v1
                  style:
                    <<: *style_anchor_remote
                    top: 65%
                    left: 50%
          
    cards: # HOME PAGE VIEW CARDS
      - type: custom:compact-custom-header # Compact header config
        main_config: true
        background_color: "#222222"
        notifications: hide
        voice: hide
        exceptions:
          - conditions:
              user_agent: Macintosh # If on a macintosh, show the notifications icon
            config:
              notifications: show
      
      - type: vertical-stack # Actual cards
        cards:
#       LIVING ROOM PICTURE
          - type: picture-elements
            image: /local/images/image_elements/living_room.png
            elements:
              - type: image # TV icon
                image: /local/images/image_elements/SVG/tv.svg
                entity: media_player.living_room
                tap_action:
                  action: call-service
                  service: media_player.media_play_pause
                  service_data:
                    entity_id: media_player.living_room
                hold_action:
                  action: more-info
                state_filter:
                  "paused": opacity(50%)
                style:
                  top: 75%
                  left: 34%
                  <<: &style_anchor_main
                    width: 2em # size of the icon
                    height: 2em # size of the icon
                    padding: 10px # how much padding around the icon for the rest of the button
                    background-color: var(--paper-item-icon-color)
                    border-radius: 50%
                    box-shadow: 0 3px 5px -1px rgba(0,0,0,.2), 0 6px 10px 0 rgba(0,0,0,.14), 0 1px 18px 0 rgba(0,0,0,.12)               
              - type: image
                image: /local/images/image_elements/SVG/lamp.svg
                entity: switch.lamp
                tap_action:
                  action: toggle
                state_filter:
                  "on": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                style:
                  top: 75%
                  left: 51%
                  <<: *style_anchor_main
              - type: image # Wall lamp icon
                image: /local/images/image_elements/SVG/wall-lamp-dark.svg
                entity: light.living_room
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                state_filter:
                  "on": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                style:
                  top: 75%
                  left: 68%
                  <<: *style_anchor_main
              - type: conditional # Speaker icon if sonos is on TV mode
                conditions:
                  - entity: binary_sensor.sonos_playing_tv
                    state: 'on'
                elements:
                  - type: image
                    image: /local/images/image_elements/SVG/speaker.svg
                    entity: media_player.sonos
                    tap_action:
                      action: call-service
                      service: media_player.media_play_pause
                      service_data:
                        entity_id: media_player.sonos
                    hold_action:
                      action: more-info
                    state_image:
                    state_filter:
                      "paused": opacity(50%)
                    style:
                      top: 75%
                      left: 85%
                      <<: *style_anchor_main
              - type: conditional # Speaker icon if sonos is not on TV mode
                conditions:
                  - entity: binary_sensor.sonos_playing_tv
                    state: 'off'
                elements:
                  - type: image
                    image: /local/images/image_elements/SVG/speaker.svg
                    entity: media_player.sonos
                    tap_action:
                      action: call-service
                      service: media_player.media_play_pause
                      service_data:
                        entity_id: media_player.sonos
                    hold_action:
                      action: more-info
                    state_image:
                    state_filter:
                      "paused": opacity(50%)
                      "playing": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                    style:
                      top: 75%
                      left: 85%
                      <<: *style_anchor_main
 #             - type: image # Home icon
 #               image: /local/images/image_elements/SVG/home.svg
 #               entity: input_boolean.living_room_main
 #               tap_action:
 #                 action: more-info
 #               style:
 #                 top: 20%
 #                 left: 85%
 #                 <<: *style_anchor_main
#       KITCHEN PICTURE
          - type: picture-elements
            image: /local/images/image_elements/kitchen.png
            elements:
              - type: image
                image: /local/images/image_elements/SVG/speaker.svg
                entity: media_player.kitchen
                tap_action:
                  action: call-service
                  service: media_player.media_play_pause
                  service_data:
                    entity_id: media_player.kitchen
                hold_action:
                  action: more-info
                state_image:
                state_filter:
                  "paused": opacity(50%)
                  "playing": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                style:
                  top: 75%
                  left: 85%
                  <<: *style_anchor_main
#       BEDROOM PICTURE
          - type: picture-elements
            image: /local/images/image_elements/bedroom.png
            elements:
              - type: image # TV icon
                image: /local/images/image_elements/SVG/tv.svg
                entity: media_player.fire_tv
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    entity_id: remote.living_room_hub
                    device: 60553170
                    command: OK
                hold_action:
                  action: more-info
                state_filter:
                  "paused": opacity(50%)
                style:
                  top: 75%
                  left: 51%
                  <<: *style_anchor_main
              - type: image
                image: /local/images/image_elements/SVG/lightbulb7.svg
                entity: light.bedroom
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                state_filter:
                  "on": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                style:
                  top: 75%
                  left: 68%
                  <<: *style_anchor_main
              - type: image
                image: /local/images/image_elements/SVG/speaker.svg
                entity: media_player.landing_dot
                tap_action:
                  action: call-service
                  service: media_player.media_play_pause
                  service_data:
                    entity_id: media_player.landing_dot
                hold_action:
                  action: more-info
                state_image:
                state_filter:
                  "paused": opacity(50%)
                  "playing": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                style:
                  top: 75%
                  left: 85%
                  <<: *style_anchor_main
#       HOME PICTURE
          - type: picture-elements
            image: /local/images/image_elements/home2.png
            elements:
              - type: image
                image: /local/images/image_elements/SVG/alarm-clear-slash.svg
                entity: alarm_control_panel.ha_alarm
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/alarm
                hold_action:
                  action: more-info
                state_image:
                  "armed_home": /local/images/image_elements/SVG/alarm-clear.svg
                  "armed_away": /local/images/image_elements/SVG/alarm-clear.svg
                state_filter:
                  "armed_home": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                  "armed_away": invert(.5) sepia(1) saturate(8) hue-rotate(10deg)
                style:
                  top: 75%
                  left: 85%
                  <<: *style_anchor_main
